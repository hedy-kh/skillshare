"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[647],{3647:function(e,t,n){n.d(t,{$:function(){return v}});var a=n(2903),i=n(2784),o=n(5480),r=n(8173),l=n(3476),s=n(8690),u=n(4804),c=n(4334),d=n(1609),g=n(4095),m=n(2848),h=n(6884);const v=e=>{const t=(0,s.useCardState)(),n=(0,o.a2)({onNextStep:()=>t.setError(void 0)}),v=i.useRef(null),{createOrganization:p,isLoaded:b,setActive:f}=(0,r.useCoreOrganizationList)(),{organization:z}=(0,r.useCoreOrganization)(),[x,S]=i.useState(),C=(0,d.Yp)("name","",{type:"text",label:(0,c.u1)("formFieldLabel__organizationName"),placeholder:(0,c.u1)("formFieldInputPlaceholder__organizationName")}),Z=(0,d.Yp)("slug","",{type:"text",label:(0,c.u1)("formFieldLabel__organizationSlug"),placeholder:(0,c.u1)("formFieldInputPlaceholder__organizationSlug")}),_=!!C.value,B=()=>{var t;e.navigateAfterCreateOrganization(v.current),null===(t=e.onComplete)||void 0===t||t.call(e)},P=e=>{Z.setValue(e)},T="organizationList"===e.flow?"xlargeMedium":void 0,y="organizationList"===e.flow?"headingRegularRegular":void 0;return(0,a.BX)(o.en,{...n.props,children:[(0,a.tZ)(s.ContentPage,{Breadcrumbs:null,headerTitle:e.startPage.headerTitle,headerSubtitle:e.startPage.headerSubtitle,headerTitleTextVariant:T,headerSubtitleTextVariant:y,sx:e=>({minHeight:e.sizes.$60}),children:(0,a.BX)(s.Form.Root,{onSubmit:async a=>{var i;if(a.preventDefault(),_&&b)try{const t=await p({name:C.value,slug:Z.value});if(x&&await t.setLogo({file:x}),v.current=t,await f({organization:t}),null!==(i=e.skipInvitationScreen)&&void 0!==i?i:1===t.maxAllowedMemberships)return B();n.nextStep()}catch(e){(0,d.S3)(e,[C,Z],t.setError)}},children:[(0,a.tZ)(h.D,{organization:{name:C.value},onAvatarChange:async e=>await S(e),onAvatarRemove:x?()=>(t.setIdle(),S(null)):null,avatarPreviewPlaceholder:(0,a.tZ)(s.IconButton,{variant:"ghost",colorScheme:"neutral","aria-label":"Upload organization logo",icon:(0,a.tZ)(l.Icon,{size:"md",icon:u.gq,sx:e=>({transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$11,height:e.sizes.$11,borderRadius:e.radii.$md,backgroundColor:e.colors.$avatarBackground,":hover":{backgroundColor:d.O9.makeTransparent(e.colors.$avatarBackground,.2),svg:{transform:"scale(1.2)"}}})})}),(0,a.tZ)(s.Form.ControlRow,{elementId:C.id,children:(0,a.tZ)(s.Form.Control,{sx:{flexBasis:"80%"},autoFocus:!0,...C.props,onChange:e=>{C.setValue(e.target.value),P((0,d.qi)(e.target.value))},required:!0})}),(0,a.tZ)(s.Form.ControlRow,{elementId:Z.id,children:(0,a.tZ)(s.Form.Control,{sx:{flexBasis:"80%"},...Z.props,onChange:e=>{P(e.target.value)},icon:u.Zc,required:!0})}),(0,a.BX)(s.FormButtonContainer,{children:[(0,a.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!_,localizationKey:(0,c.u1)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,a.tZ)(s.Form.ResetButton,{localizationKey:(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,a.tZ)(s.ContentPage,{Breadcrumbs:null,headerTitle:(0,c.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:T,headerSubtitleTextVariant:y,sx:e=>({minHeight:e.sizes.$60}),children:z&&(0,a.tZ)(g.l,{resetButtonLabel:(0,c.u1)("createOrganization.invitePage.formButtonReset"),onSuccess:n.nextStep,onReset:B})}),(0,a.tZ)(s.SuccessPage,{title:(0,c.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:T,contents:(0,a.tZ)(m.a,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:B})]})}},4095:function(e,t,n){n.d(t,{l:function(){return v}});var a=n(2903),i=n(221),o=n(2784),r=n(8173),l=n(3476),s=n(8690),u=n(5802),c=n(4334),d=n(3736),g=n(1609),m=n(9654);const h=e=>/^\S+@\S+\.\S+$/.test(e),v=e=>{const{navigate:t}=(0,d.useRouter)(),{onSuccess:n,onReset:u=(()=>t("..")),resetButtonLabel:m}=e,{organization:v}=(0,r.useCoreOrganization)(),b=(0,s.useCardState)(),{t:f,locale:z}=(0,c.zJ)(),[x,S]=(0,o.useState)(!1);if(!v)return null;const C=(0,g.Yp)("emailAddress","",{type:"text",label:(0,c.u1)("formFieldLabel__emailAddresses")}),{props:{setError:Z,setWarning:_,setSuccess:B,setInfo:P,validatePassword:T,setHasPassedComplexity:y,hasPassedComplexity:R,feedback:w,feedbackType:F,clearFeedback:k,...$}}=C,L=!!C.value.length||x;return(0,a.BX)(s.Form.Root,{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);return v.inviteMembers({emailAddresses:C.value.split(","),role:t.get("role")}).then(n).catch((e=>{var t,n,a;if((0,i.kD)(e)&&(e=>{var t,n,a,i;const o=new Set([...null!==(n=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==n?n:[],...null!==(i=null===(a=e.meta)||void 0===a?void 0:a.identifiers)&&void 0!==i?i:[]]),r=C.value.split(",");C.setValue(r.filter((e=>!o.has(e))).join(","))})(e.errors[0]),(0,i.kD)(e)&&"duplicate_record"===(null===(n=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===n?void 0:n.code)){const t=(null===(a=e.errors[0].meta)||void 0===a?void 0:a.emailAddresses)||[];b.setError(f((0,c.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,g.z$)(t,z)})))}else(0,g.S3)(e,[],b.setError)}))},children:[(0,a.tZ)(s.Form.ControlRow,{elementId:C.id,children:(0,a.BX)(l.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,a.tZ)(l.Text,{localizationKey:(0,c.u1)("formFieldLabel__emailAddresses")}),(0,a.tZ)(l.Text,{localizationKey:(0,c.u1)("formFieldInputPlaceholder__emailAddresses"),colorScheme:"neutral",sx:e=>({fontSize:e.fontSizes.$xs})}),(0,a.tZ)(s.TagInput,{...$,autoFocus:!0,validate:h,sx:{width:"100%"},validateUnsubmittedEmail:e=>S(h(e))})]})}),(0,a.tZ)(p,{}),(0,a.BX)(s.FormButtonContainer,{children:[(0,a.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!L,localizationKey:(0,c.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,a.tZ)(s.Form.ResetButton,{localizationKey:m||(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:u})]})]})},p=()=>{const{options:e,isLoading:t}=(0,u.e)(),n=(0,g.Yp)("role","",{label:(0,c.u1)("formFieldLabel__role")});return(0,a.tZ)(s.Form.ControlRow,{elementId:n.id,children:(0,a.BX)(l.Flex,{direction:"col",gap:2,children:[(0,a.tZ)(l.Text,{localizationKey:n.label}),(0,a.tZ)(m.DQ,{...n.props,roles:e,isDisabled:t,onChange:e=>n.setValue(e),triggerSx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48})})]})})}},2848:function(e,t,n){n.d(t,{a:function(){return v},F:function(){return h}});var a=n(2903),i=n(996),o=n(5480),r=n(8173),l=n(3476),s=n(8690),u=n(4804),c=n(3736);const d=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const n=(0,c.useRouter)();return(0,a.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,a.tZ)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,a.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,i.OR)(t)," members.",(0,a.tZ)("br",{}),(0,a.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>n.navigate((0,i.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var g=n(4095),m=n(2609);const h=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),n=(0,s.useCardState)(),u=(0,o.a2)({onNextStep:()=>n.setError(void 0)}),{organization:c}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:p}=(0,r.useOrganizationProfileContext)();if(!c)return null;const b=!!p&&(0,i.OR)(p)<=c.pendingInvitationsCount+c.membersCount;return(0,a.BX)(o.en,{...u.props,children:[(0,a.BX)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:m.G,children:[b&&h&&(0,a.tZ)(d,{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:p}),(0,a.tZ)(g.l,{onSuccess:u.nextStep})]}),(0,a.tZ)(s.SuccessPage,{title:e,contents:(0,a.tZ)(v,{}),Breadcrumbs:m.G})]})})),v=()=>(0,a.BX)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,a.tZ)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:u.GT}),(0,a.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},9654:function(e,t,n){n.d(t,{DQ:function(){return c},RN:function(){return u},wQ:function(){return l}});var a=n(2903),i=(n(2784),n(3476)),o=n(8690),r=n(5802);const l=e=>{const{headers:t,page:n,onPageChange:r,rows:l,isLoading:u,itemCount:c,itemsPerPage:d,pageCount:g,emptyStateLocalizationKey:m}=e,h=c>0?Math.max(0,(n-1)*d)+1:0,v=Math.min(n*d,c);return(0,a.BX)(i.Col,{gap:4,sx:{width:"100%"},children:[(0,a.tZ)(i.Flex,{sx:{overflowX:"auto"},children:(0,a.BX)(i.Table,{sx:{width:"100%"},children:[(0,a.tZ)(i.Thead,{children:(0,a.tZ)(i.Tr,{children:t.map(((e,t)=>(0,a.tZ)(i.Th,{elementDescriptor:i.descriptors.tableHead,localizationKey:e},t)))})}),(0,a.tZ)(i.Tbody,{children:u?(0,a.tZ)(i.Tr,{children:(0,a.tZ)(i.Td,{colSpan:4,children:(0,a.tZ)(i.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"}})})}):l.length?l:(0,a.tZ)(s,{localizationKey:m},"empty")})]})}),(0,a.tZ)(o.Pagination,{count:g,page:n,onChange:r,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:h,endingRow:v}})]})},s=e=>(0,a.tZ)(i.Tr,{children:(0,a.tZ)(i.Td,{colSpan:4,children:(0,a.tZ)(i.Text,{localizationKey:e.localizationKey,sx:e=>({margin:"auto",display:"block",width:"fit-content",fontSize:e.fontSizes.$xs})})})}),u=e=>(0,a.tZ)(i.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$blackAlpha50}})}),c=e=>{const{value:t,roles:n,onChange:i,isDisabled:l,triggerSx:s,optionListSx:u}=e,c=!n,d=[{label:"admin",value:"admin"},{label:"basic_member",value:"basic_member"}],{localizeCustomRole:g}=(0,r.q)(),m=[...n||[],...d,{label:"guest_member",value:"guest_member"}].find((e=>e.value===t)),h=(c?d:n).map((e=>({value:e.value,label:g(e.value)||e.label})));return(0,a.BX)(o.Select,{elementId:"role",options:h,value:t,onChange:e=>i(e.value),children:[(0,a.tZ)("input",{name:"role",type:"hidden",value:t}),(0,a.tZ)(o.SelectButton,{sx:s||(e=>({color:e.colors.$colorTextSecondary,backgroundColor:"transparent"})),isDisabled:l,children:g(null==m?void 0:m.value)||(null==m?void 0:m.label)}),(0,a.tZ)(o.SelectOptionList,{sx:u})]})}},6884:function(e,t,n){n.d(t,{D:function(){return r}});var a=n(2903),i=n(8690),o=n(4334);const r=e=>{const{organization:t,...n}=e;return(0,a.tZ)(i.AvatarUploader,{...n,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,a.tZ)(i.OrganizationAvatar,{size:e=>e.sizes.$11,...t})})}},2609:function(e,t,n){n.d(t,{G:function(){return l},M:function(){return r}});var a=n(2903),i=(n(2784),n(8173)),o=n(8690);const r=e=>{const{organization:t}=(0,i.useCoreOrganization)(),{pages:n}=(0,i.useOrganizationProfileContext)();return t?(0,a.BX)(o.NavbarContextProvider,{children:[(0,a.tZ)(o.NavBar,{header:(0,a.tZ)(o.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:n.routes,contentRef:e.contentRef}),e.children]}):null},l=e=>{const{pages:t}=(0,i.useOrganizationProfileContext)();return(0,a.tZ)(o.Breadcrumbs,{...e,pageToRootNavbarRoute:t.pageToRootNavbarRouteMap})}}}]);